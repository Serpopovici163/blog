<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>BRZ Steering Wheel - Ludicrous Tech</title>
<meta name="description" content="Steering Wheel Button Integration">


  <meta name="author" content="Serban Popovici">
  
  <meta property="article:author" content="Serban Popovici">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_CA">
<meta property="og:site_name" content="Ludicrous Tech">
<meta property="og:title" content="BRZ Steering Wheel">
<meta property="og:url" content="http://localhost:4000/brz-steering-wheel/">


  <meta property="og:description" content="Steering Wheel Button Integration">







  <meta property="article:published_time" content="2022-10-01T00:00:00-04:00">





  

  


<link rel="canonical" href="http://localhost:4000/brz-steering-wheel/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Serban Popovici",
      "url": "http://localhost:4000/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <!-- <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Ludicrous Tech Feed"> -->


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--archive">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/favicon.ico" alt="Ludicrous Tech"></a>
        
        <a class="site-title" href="/">
          Ludicrous Tech
          
        </a>
        <ul class="visible-links"></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person" class="h-card">

  
    <div class="author__avatar">
      <a href="http://localhost:4000/">
        <img src="/assets/img/bio.jpg" alt="Serban Popovici" itemprop="image" class="u-photo">
      </a>
    </div>
  

  <div class="author__content">
    <h3 class="author__name p-name" itemprop="name">
      <a class="u-url" rel="me" href="http://localhost:4000/" itemprop="url">Serban Popovici</a>
    </h3>
    
      <div class="author__bio p-note" itemprop="description">
        <table>
  <tbody>
    <tr>
      <td>MEng Aerospace Student at McGill</td>
      <td> </td>
      <td>BASc Biomedical Mechanical Engineering</td>
    </tr>
  </tbody>
</table>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name" class="p-locality">Montreal, Quebec, Canada</span>
        </li>
      

      
        
          
            <li><a href="mailto:serpopovici163@gmail.com" rel="nofollow noopener noreferrer me"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span></a></li>
          
        
          
            <li><a href="https://ludicroustech.ca" rel="nofollow noopener noreferrer me"><i class="fas fa-fw fa-link" aria-hidden="true"></i><span class="label">Website</span></a></li>
          
        
          
        
          
        
          
            <li><a href="https://instagram.com/sketchy.serban" rel="nofollow noopener noreferrer me"><i class="fab fa-fw fa-instagram" aria-hidden="true"></i><span class="label">Instagram</span></a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer me">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>
  
  </div>



  <div class="archive">
    
      <h1 id="page-title" class="page__title">BRZ Steering Wheel</h1>
    
    <h3 id="steering-wheel-button-integration">Steering Wheel Button Integration</h3>

<p>Steering wheel buttons were added to BRZs in 2017 and mine is a 2013 so I purchased a salvage steering wheel in order to integrate its buttons into my systems. Should anybody else contemplate to do the same, be aware that even though steering wheels are cheap the airbag most certainly is not: a brand new OEM airbag for my car is $CAD 1100 from the dealer while a used one is ~$CAD 700 (I got one of these and it is most likely counterfeit so it may be more of a grenade than it is an airbag - choose wisely).</p>

<p>The steering wheel uses an Arduino Nano to convert button presses into CAN messages that are sent along my CAN network. In order to interface the Arduino with the steering wheel, I took apart the button clusters on each side of the 
<img src="/assets/img/brz/steering_wheel_button_connector.jpg" alt="Steering wheel button connector" style="float: right; width:50%; height:80%; margin-left: 10px;" />
steering wheel and followed traces to figure out the function of each wire. My findings are listed below for anybody else intending to reverse engineer the steering wheel buttons on a BRZ (wires are listed from left to right, top to bottom, looking at the connector from behind as depicted to the right):</p>
<ul>
  <li>Light green –&gt; Volume and arrow keys of left side cluster</li>
  <li>Red –&gt; Common of left side cluster</li>
  <li>Green –&gt; Arrow keys of right side cluster</li>
  <li>Purple –&gt; Enter and back key of right side cluster</li>
  <li>Yellow –&gt; Common of right side cluster</li>
  <li>Black –&gt; Call buttons, source button, left enter button, and voice button</li>
  <li>Blue –&gt; Steering wheel ground</li>
  <li>Brown –&gt; Cruise control pin 1</li>
  <li>Grey –&gt; Cruise control pin 2</li>
  <li>Black + White –&gt; LED ground</li>
  <li>White –&gt; LED VCC (5V works but LEDs are dim. Not sure I’m willing to go higher so I’ll suck it up)</li>
</ul>

<p>The ‘voice’ button on the right side of the steering wheel is wired to the left button cluster and its state is transmitted through the (light green or black) wire. Button states are transmitted by varying the resistance between the common pin of each button cluster and one of the two output pins of each button cluster. The Arduino interprets these using an analog pin using the INPUT_PULLUP pin mode with the common pins being connected to ground. The resulting resistance and output wire for any button press is listed below in hopes of saving someone else the effort required to decode these circuit boards though I ended up using analogRead values in my code so these are useless to me.</p>

<table>
  <thead>
    <tr>
      <th>Left Side Cluster</th>
      <th>Right Side Cluster</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Source –&gt; 115 Ohm BLACK</td>
      <td>Up –&gt; 330 Ohm GREEN</td>
    </tr>
    <tr>
      <td>Call pickup –&gt; 425 Ohm BLACK</td>
      <td>Right –&gt; 3.1 kOhm GREEN</td>
    </tr>
    <tr>
      <td>Call hangup –&gt; 225 Ohm BLACK</td>
      <td>Down –&gt; 1 kOhm GREEN</td>
    </tr>
    <tr>
      <td>Volume up –&gt; short LIGHT GREEN</td>
      <td>Left –&gt; short GREEN</td>
    </tr>
    <tr>
      <td>Volume down –&gt; 50 Ohm LIGHT GREEN</td>
      <td>Enter –&gt; 100 kOhm PURPLE</td>
    </tr>
    <tr>
      <td>Right –&gt; 115 Ohm LIGHT GREEN</td>
      <td>Back –&gt; 101 kOhm PURPLE</td>
    </tr>
    <tr>
      <td>Left –&gt; 245 Ohm LIGHT GREEN</td>
      <td>Voice –&gt; 50 Ohm BLACK</td>
    </tr>
    <tr>
      <td>Enter –&gt; short BLACK</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p>Taking these findings into account, I connected the yellow and red pins to ground and connected the light green, green, purple, and black wire to analog pins that were set up as INPUT_PULLUPs.
<img src="/assets/img/brz/steering_wheel_computer.jpg" alt="Steering wheel computer" style="float: right; width:50%; height:80%; margin-left: 10px;" />
With this setup the Arduino can mostly distinguish between the buttons however some buttons produce analogRead() values that are very close to each other and are therefore mistaken by the Arduino at times. The Arduino then encodes these button presses into an 8-byte CAN packet that gets sent repeatedly over my CAN network as long as the button remains pressed. I’ve also attached the LED VCC pin to a digital pin so it can be set on by the Arduino whenever another device on the CAN network commands it to do so. The final product, inserted in the steering wheel, is depicted below.</p>

<p><img src="/assets/img/brz/steering_wheel_computer_installed_1.jpg" alt="Steering wheel computer 1" style="float: left; width:50%; height:80%;" />
<img src="/assets/img/brz/steering_wheel_computer_installed_2.jpg" alt="Steering wheel computer 2" style="float: right; width:50%; height:80%;" /></p>

<p>This design worked out really nicely and provides easy access to the Arduino’s USB port so the computer can be reprogrammed at any time. The car’s clockspring had quite a few unused pins so I was able to wire power and CAN through the stock steering wheel connector and retrieve the signals inside. I’ve integrated a 5V regulator into the steering column that provides regulated 5V to the steering wheel computer. This is because I omitted to add it in the 3D-printed bracket that holds the steering wheel computer in place and decided to simply include it in the steering column as opposed to redesigning the bracket slightly and rewiring the steering wheel. I justified this by telling myself that I do not trust the cheap buck regulators I got and I would rather a fire occur in the steering column as opposed to right next to my counterfeit steering wheel airbag.</p>

  </div>
</div>
    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="mailto:serpopovici163@gmail.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i> Email</a></li>
        
      
        
          <li><a href="https://ludicroustech.ca" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i> Website</a></li>
        
      
        
      
        
      
        
          <li><a href="https://instagram.com/discover.ottawa" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-instagram" aria-hidden="true"></i> Instagram</a></li>
        
      
    

    
      <!-- <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li> -->
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2023 Serban Popovici. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>










  </body>
</html>
